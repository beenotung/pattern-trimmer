<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pattern Trimmer</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 10px;
      }

      .header p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      .content {
        padding: 40px;
      }

      .form-group {
        margin-bottom: 25px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
        font-size: 1rem;
      }

      input,
      textarea {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e1e5e9;
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s ease;
        font-family: inherit;
      }

      input:focus,
      textarea:focus {
        outline: none;
        border-color: #4facfe;
        box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
      }

      textarea {
        resize: vertical;
        min-height: 120px;
      }

      .row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .output-section {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
      }

      .output-label {
        font-weight: 600;
        color: #333;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .copy-btn {
        background: #28a745;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .copy-btn:hover {
        background: #218838;
        transform: translateY(-1px);
      }

      .copy-btn:active {
        transform: translateY(0);
      }

      .copy-btn.copied {
        background: #17a2b8;
      }

      #output {
        background: white;
        border: 2px solid #e1e5e9;
        border-radius: 8px;
        padding: 16px;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 0.95rem;
        line-height: 1.5;
        white-space: pre-wrap;
        word-break: break-word;
        min-height: 60px;
        color: #333;
      }

      .stats {
        display: flex;
        gap: 20px;
        margin-top: 15px;
        font-size: 0.9rem;
        color: #666;
      }

      .stat {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      @media (max-width: 768px) {
        .row {
          grid-template-columns: 1fr;
        }

        .content {
          padding: 20px;
        }

        .header {
          padding: 20px;
        }

        .header h1 {
          font-size: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Pattern Trimmer</h1>
        <p>Remove prefix and suffix from your text with ease</p>
      </div>

      <div class="content">
        <div class="form-group">
          <label for="inputText">Text to process:</label>
          <textarea
            id="inputText"
            placeholder="Enter your text here...&#10;&#10;Example:&#10;se-024-Class 5 Recording - Introduction to Data Flow Diagram (Lecture).mp4&#10;se-023-Class 5 Recording - Class 5 Overview.mp4"
          ></textarea>
        </div>

        <div class="row">
          <div class="form-group">
            <label for="prefix">Prefix to remove:</label>
            <input
              type="text"
              id="prefix"
              placeholder="e.g., 'se-*-' or 'Hello '"
            />
            <small
              style="
                color: #666;
                font-size: 0.85rem;
                margin-top: 4px;
                display: block;
              "
            >
              Use * for wildcards. Example: "se-*-" matches "se-024-",
              "se-023-", etc.
            </small>
          </div>

          <div class="form-group">
            <label for="suffix">Suffix to remove:</label>
            <input
              type="text"
              id="suffix"
              placeholder="e.g., '.mp4' or ' World'"
            />
            <small
              style="
                color: #666;
                font-size: 0.85rem;
                margin-top: 4px;
                display: block;
              "
            >
              Use * for wildcards. Example: "*.mp4" matches any file ending with
              .mp4
            </small>
          </div>
        </div>

        <div class="output-section">
          <div class="output-label">
            <span>Processed Result:</span>
            <button class="copy-btn" id="copyBtn">Copy to Clipboard</button>
          </div>
          <pre id="output">Your processed text will appear here...</pre>
          <div class="stats">
            <div class="stat">
              <span>Original:</span>
              <span id="originalLength">0</span>
              <span>chars</span>
            </div>
            <div class="stat">
              <span>Processed:</span>
              <span id="processedLength">0</span>
              <span>chars</span>
            </div>
            <div class="stat">
              <span>Removed:</span>
              <span id="removedLength">0</span>
              <span>chars</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      let inputText = document.getElementById('inputText')
      let prefixInput = document.getElementById('prefix')
      let suffixInput = document.getElementById('suffix')
      let output = document.getElementById('output')
      let copyBtn = document.getElementById('copyBtn')
      let originalLength = document.getElementById('originalLength')
      let processedLength = document.getElementById('processedLength')
      let removedLength = document.getElementById('removedLength')

      function processText() {
        let text = inputText.value
        let prefix = prefixInput.value
        let suffix = suffixInput.value

        let processed = text

        // Remove prefix if it matches (supports wildcards)
        if (prefix) {
          let prefixMatch = matchPattern(processed, prefix, 'prefix')
          if (prefixMatch) {
            processed = processed.substring(prefixMatch.length)
          }
        }

        // Remove suffix if it matches (supports wildcards)
        if (suffix) {
          let suffixMatch = matchPattern(processed, suffix, 'suffix')
          if (suffixMatch) {
            processed = processed.substring(
              0,
              processed.length - suffixMatch.length,
            )
          }
        }

        output.textContent = processed

        // Update stats
        let original = text.length
        let processedLen = processed.length
        let removed = original - processedLen

        originalLength.textContent = original
        processedLength.textContent = processedLen
        removedLength.textContent = removed
      }

      function matchPattern(text, pattern, type) {
        // If no wildcards, use exact matching
        if (!pattern.includes('*')) {
          if (type === 'prefix' && text.startsWith(pattern)) {
            return pattern
          }
          if (type === 'suffix' && text.endsWith(pattern)) {
            return pattern
          }
          return null
        }

        // Convert wildcard pattern to regex for more accurate matching
        let regexPattern = pattern
          .replace(/[.*+?^${}()|[\]\\]/g, '\\$&') // Escape special regex chars
          .replace(/\\\*/g, '.*?') // Convert \* to .*? (non-greedy)

        if (type === 'prefix') {
          // For prefix, find the match that starts at the beginning
          let regex = new RegExp('^' + regexPattern)
          let match = text.match(regex)
          return match ? match[0] : null
        } else if (type === 'suffix') {
          // For suffix, find the match that ends at the end
          let regex = new RegExp(regexPattern + '$')
          let match = text.match(regex)
          return match ? match[0] : null
        }

        return null
      }

      function copyToClipboard() {
        let text = output.textContent

        if (navigator.clipboard && window.isSecureContext) {
          navigator.clipboard
            .writeText(text)
            .then(() => {
              showCopySuccess()
            })
            .catch(() => {
              fallbackCopyTextToClipboard(text)
            })
        } else {
          fallbackCopyTextToClipboard(text)
        }
      }

      function fallbackCopyTextToClipboard(text) {
        let textArea = document.createElement('textarea')
        textArea.value = text
        textArea.style.top = '0'
        textArea.style.left = '0'
        textArea.style.position = 'fixed'
        textArea.style.opacity = '0'

        document.body.appendChild(textArea)
        textArea.focus()
        textArea.select()

        try {
          document.execCommand('copy')
          showCopySuccess()
        } catch (err) {
          console.error('Failed to copy text: ', err)
        }

        document.body.removeChild(textArea)
      }

      function showCopySuccess() {
        let originalText = copyBtn.textContent
        copyBtn.textContent = 'Copied!'
        copyBtn.classList.add('copied')

        setTimeout(() => {
          copyBtn.textContent = originalText
          copyBtn.classList.remove('copied')
        }, 2000)
      }

      // Event listeners
      inputText.addEventListener('input', processText)
      prefixInput.addEventListener('input', processText)
      suffixInput.addEventListener('input', processText)
      copyBtn.addEventListener('click', copyToClipboard)

      // Initial processing
      processText()
    </script>
  </body>
</html>
